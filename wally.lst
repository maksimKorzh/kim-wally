;-----------------------------------------------------------------------;
;  Program:     Wally                                                   ;
;  Author:      Code monkey King                                        ;
;  Date:        2024-08-14                                              ;
;  System:      Unexpanded KIM-1                                        ;
;-----------------------------------------------------------------------;
;  Description:                                                         ;
;  This listing is a reconstruction of the original game of Go playing  ;
;  program written by Jonathan K. Millen for the unexpanded KIM-1. The  ;
;  code has been carefully assembled by hand to preserve the original   ;
;  functionality on the same platform.                                  ;
;-----------------------------------------------------------------------;

;-----------------------------------------------------------------------;
;                 BOARD REPRESENTATION & PIECE ENCODING                 ;
;                       ($0000-$00FF), 256 bytes                        ;
;-----------------------------------------------------------------------;
;                                                                       ;
;    30  31  32  32  34  35  36  37  38  39  41  42  43  44  45  46     ;
;    31  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    32  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    33  2E  2E  23  2E  2E  2E  2E  2E  2E  2E  2E  2E  4E  2E  2E     ;
;    34  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    35  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    36  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    37  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    38  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    39  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    41  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    42  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    43  2E  2E  23  2E  2E  2E  2E  2E  2E  2E  2E  2E  4E  2E  2E     ;
;    44  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    45  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    46  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;                                                                       ;
;-----------------------------------------------------------------------;
;       EMPTY = '.'; BLACK = '#'; WHITE = 'O'; MARKER = 6TH BIT;        ;
;-----------------------------------------------------------------------;

;-----------------------------------------------------------------------;
;                            PROGRAM LISTING                            ;
;-----------------------------------------------------------------------;
  PRNBRD:  0200  18        CLC                     ;                    ;
           0201  A2 00     LDX #$00                ;                    ;
  PRLOOP:  0203  8A        TXA                     ;                    ;
           0204  29 0F     AND #$0F                ;                    ;
           0206  F0 0D     BEQ NEWLIN              ;                    ;
  PRNCHR:  0208  B5 00     LDA $00,X               ;                    ;
           020A  20 A0 1E  JSR $1EA0               ;                    ;
           020D  20 9E 1E  JSR $1E9E               ;                    ;
           0210  E8        INX                     ;    Print board     ;
           0211  D0 F0     BNE PRLOOP              ;   ($0200-$021E)    ;
           0213  F0 09     BEQ PRNRET              ;      31 bytes      ;
  NEWLIN:  0215  8A        TXA                     ;                    ;
           0216  48        PHA                     ;                    ;
           0217  20 2F 1E  JSR $1E2F               ;                    ;
           021A  68        PLA                     ;                    ;
           021B  AA        TAX                     ;                    ;
           021C  90 EA     BCC PRNCHR              ;                    ;
  PRNRET:  021E  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
  CLRBRD:  021F  A2 00     LDX #$00                ;                    ;
           0221  A9 2E     LDA #$2E                ;    Clear board     ;
  CLEARL:  0223  95 00     STA $00,X               ;   ($021F-$0228)    ;
           0225  E8        INX                     ;      10 bytes      ;
           0226  D0 FB     BNE CLEARL              ;                    ;
           0228  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
  COORDS:  0229  30 31 32  .BYTE '0', '1', '2'     ;                    ;
           022C  33 34 35  .BYTE '3', '4', '5'     ;    Coordinates     ;
           022F  36 37 38  .BYTE '6', '7', '8'     ;   ($0229-$0238)    ;
           0232  39 41 42  .BYTE '9', 'A', 'B'     ;      16 bytes      ;
           0235  43 44 45  .BYTE 'C', 'D', 'E'     ;                    ;
           0238  46        .BYTE 'F'               ;                    ;
;-----------------------------------------------------------------------;
  PCOORD:  0239  A2 00     LDX #$00                ;                    ;
  COLLOP:  023B  BD 29 02  LDA COORDS,X            ;                    ;
           023E  95 00     STA $00,X               ;                    ;
           0240  E8        INX                     ;                    ;
           0241  E0 10     CPX #$10                ;                    ;
           0243  D0 F6     BNE COLLOP              ;                    ;
           0245  A0 00     LDY #$00                ;                    ;
           0247  A2 00     LDX #$00                ;    Print coords    ;
  ROWLOP:  0249  B9 29 02  LDA COORDS,Y            ;    ($0239-$0258)   ;
           024C  95 00     STA $00,X               ;      32 bytes      ;
           024E  8A        TXA                     ;                    ;
           024F  18        CLC                     ;                    ;
           0250  69 10     ADC #$10                ;                    ;
           0252  AA        TAX                     ;                    ;
           0253  C8        INY                     ;                    ;
           0254  C0 10     CPY #$10                ;                    ;
           0256  D0 F1     BNE ROWLOP              ;                    ;
           0258  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
