;-----------------------------------------------------------------------;
;  Program:     Wally                                                   ;
;  Author:      Code monkey King                                        ;
;  Date:        2024-08-14                                              ;
;  System:      Unexpanded KIM-1                                        ;
;-----------------------------------------------------------------------;
;  Description:                                                         ;
;  This listing is a reconstruction of the original game of Go playing  ;
;  program written by Jonathan K. Millen for the unexpanded KIM-1. The  ;
;  code has been carefully assembled by hand to preserve the original   ;
;  functionality on the same platform.                                  ;
;-----------------------------------------------------------------------;

;-----------------------------------------------------------------------;
;                 BOARD REPRESENTATION & PIECE ENCODING                 ;
;                       ($0000-$00FF), 256 bytes                        ;
;-----------------------------------------------------------------------;
;                                                                       ;
;    30  31  32  32  34  35  36  37  38  39  41  42  43  44  45  46     ;
;    31  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    32  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    33  2E  2E  23  2E  2E  2E  2E  2E  2E  2E  2E  2E  4E  2E  2E     ;
;    34  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    35  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    36  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    37  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    38  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    39  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    41  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    42  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    43  2E  2E  23  2E  2E  2E  2E  2E  2E  2E  2E  2E  4E  2E  2E     ;
;    44  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    45  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;    46  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E  2E     ;
;                                                                       ;
;-----------------------------------------------------------------------;
;       EMPTY = '.'; BLACK = '#'; WHITE = 'O'; MARKER = 6TH BIT;        ;
;-----------------------------------------------------------------------;

;-----------------------------------------------------------------------;
;                            PROGRAM LISTING                            ;
;-----------------------------------------------------------------------;
  PRNBRD:  0200  A2 00     LDX #$00                ;                    ;
  PRLOOP:  0202  8A        TXA                     ;                    ;
           0203  29 0F     AND #$0F                ;                    ;
           0205  F0 0D     BEQ NEWLIN              ;                    ;
  PRNCHR:  0207  B5 00     LDA $00,X               ;                    ;
           0209  20 A0 1E  JSR $1EA0               ;                    ;
           020C  20 9E 1E  JSR $1E9E               ;                    ;
           020F  E8        INX                     ;    Print board     ;
           0210  D0 F0     BNE PRLOOP              ;   ($0200-$021D)    ;
           0212  F0 09     BEQ PRNRET              ;      30 bytes      ;
  NEWLIN:  0214  8A        TXA                     ;                    ;
           0215  48        PHA                     ;                    ;
           0216  20 2F 1E  JSR $1E2F               ;                    ;
           0219  68        PLA                     ;                    ;
           021A  AA        TAX                     ;                    ;
           021B  90 EA     BCC PRNCHR              ;                    ;
  PRNRET:  021D  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
  CLRBRD:  021E  A2 00     LDX #$00                ;                    ;
           0220  A9 2E     LDA #$2E                ;    Clear board     ;
  CLEARL:  0222  95 00     STA $00,X               ;   ($021E-$0227)    ;
           0224  E8        INX                     ;      10 bytes      ;
           0225  D0 FB     BNE CLEARL              ;                    ;
           0227  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
  COORDS:  0228  30 31 32  .BYTE '0', '1', '2'     ;                    ;
           022B  33 34 35  .BYTE '3', '4', '5'     ;    Coordinates     ;
           022E  36 37 38  .BYTE '6', '7', '8'     ;   ($0228-$0237)    ;
           0231  39 41 42  .BYTE '9', 'A', 'B'     ;      16 bytes      ;
           0234  43 44 45  .BYTE 'C', 'D', 'E'     ;                    ;
           0237  46        .BYTE 'F'               ;                    ;
;-----------------------------------------------------------------------;
  PCOORD:  0238  A2 00     LDX #$00                ;                    ;
  COLLOP:  023A  BD 28 02  LDA COORDS,X            ;                    ;
           023D  95 00     STA $00,X               ;                    ;
           023F  E8        INX                     ;                    ;
           0240  E0 10     CPX #$10                ;                    ;
           0242  D0 F6     BNE COLLOP              ;                    ;
           0244  A0 00     LDY #$00                ;                    ;
           0246  A2 00     LDX #$00                ;    Print coords    ;
  ROWLOP:  0248  B9 28 02  LDA COORDS,Y            ;    ($021E-$0227)   ;
           024B  95 00     STA $00,X               ;      32 bytes      ;
           024D  8A        TXA                     ;                    ;
           024E  18        CLC                     ;                    ;
           024F  69 10     ADC #$10                ;                    ;
           0251  AA        TAX                     ;                    ;
           0252  C8        INY                     ;                    ;
           0253  C0 10     CPY #$10                ;                    ;
           0255  D0 F1     BNE ROWLOP              ;                    ;
           0257  60        RTS                     ;                    ;
;-----------------------------------------------------------------------;
